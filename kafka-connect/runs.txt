FileSourceConnectorService RUN 1


2019-12-13 12:20:19.638  INFO 6256 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 2.3.0
2019-12-13 12:20:19.639  INFO 6256 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: fc1aaa116b661c8a
2019-12-13 12:20:19.639  INFO 6256 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1576219819637
2019-12-13 12:20:19.816  WARN 6256 --- [work-thread | 8] org.apache.kafka.clients.NetworkClient   : [Producer clientId=8] Error while fetching metadata with correlation id 1 : {kc15=LEADER_NOT_AVAILABLE}
2019-12-13 12:20:19.819  INFO 6256 --- [work-thread | 8] org.apache.kafka.clients.Metadata        : [Producer clientId=8] Cluster ID: cMdW_kXwRq6Mxrigqjo55g
2019-12-13 12:20:20.485  INFO 6256 --- [           main] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=8] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.
2019-12-13 12:20:29.461 DEBUG 6256 --- [pool-1-thread-1] poc.kafka.service.ProducerService        : count: 10
2019-12-13 12:20:34.512  INFO 6256 --- [on(4)-127.0.0.1] inMXBeanRegistrar$SpringApplicationAdmin : Application shutdown requested.


[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --from-beginning --topic kc15
{"schema":{"type":"string","optional":false},"payload":"p0"}
{"schema":{"type":"string","optional":false},"payload":"p1"}
{"schema":{"type":"string","optional":false},"payload":"p2"}
{"schema":{"type":"string","optional":false},"payload":"p3"}
{"schema":{"type":"string","optional":false},"payload":"p4"}
{"schema":{"type":"string","optional":false},"payload":"p5"}
{"schema":{"type":"string","optional":false},"payload":"p6"}
{"schema":{"type":"string","optional":false},"payload":"p7"}
{"schema":{"type":"string","optional":false},"payload":"p8"}
{"schema":{"type":"string","optional":false},"payload":"p9"}
^CProcessed a total of 10 messages
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/connect-file-sink.properties
name=local-file-kc151
connector.class=FileStreamSink
tasks.max=1
file=/var/tmp/kc15-sink1.txt
topics=kc15
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/connect-standalone.properties
bootstrap.servers=localhost:7092

key.converter=org.apache.kafka.connect.converters.ByteArrayConverter
value.converter=org.apache.kafka.connect.json.JsonConverter

#key.converter.schemas.enable=true
value.converter.schemas.enable=true

offset.storage.file.filename=/tmp/connect.offsets
# Flush much faster than normal, which is useful for testing/debugging
offset.flush.interval.ms=10000

# plugin.path=/usr/local/share/java,/usr/local/share/kafka/plugins,/opt/connectors,
#plugin.path=
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/connect-standalone.sh config/connect-standalone.properties config/connect-file-sink.properties

[hdpusr@hdpdev6 ~]$ tail -f /var/tmp/kc15-sink1.txt
p0
p1
p2
p3
p4
p5
p6
p7
p8
p9

----------==----------
IgniteSourceConnectorService RUN 1

2019-12-13 15:00:48.677  INFO 996 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 2.3.0
2019-12-13 15:00:48.678  INFO 996 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: fc1aaa116b661c8a
2019-12-13 15:00:48.678  INFO 996 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1576229448676
2019-12-13 15:00:48.780  INFO 996 --- [work-thread | 8] org.apache.kafka.clients.Metadata        : [Producer clientId=8] Cluster ID: cMdW_kXwRq6Mxrigqjo55g
2019-12-13 15:00:48.987  INFO 996 --- [           main] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=8] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.
2019-12-13 15:00:58.552 DEBUG 996 --- [pool-1-thread-1] p.k.s.IgniteSourceConnectorService       : count: 10
2019-12-13 15:01:08.552 DEBUG 996 --- [pool-1-thread-1] p.k.s.IgniteSourceConnectorService       : count: 10
2019-12-13 15:01:18.551 DEBUG 996 --- [pool-1-thread-1] p.k.s.IgniteSourceConnectorService       : count: 10
2019-12-13 15:01:19.602  INFO 996 --- [n(10)-127.0.0.1] inMXBeanRegistrar$SpringApplicationAdmin : Application shutdown requested.

[[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --property print.key=true --from-beginning --topic {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":0,"name":"p0"}}^C
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --property print.key=true --from-beginning --topic kci1
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --property print.key=true --from-beginning --topic kci1
{"schema":{"type":"int32","optional":false},"payload":0}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":0,"name":"p0"}}
{"schema":{"type":"int32","optional":false},"payload":1}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":1,"name":"p1"}}
{"schema":{"type":"int32","optional":false},"payload":2}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":2,"name":"p2"}}
{"schema":{"type":"int32","optional":false},"payload":3}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":3,"name":"p3"}}
{"schema":{"type":"int32","optional":false},"payload":4}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":4,"name":"p4"}}
{"schema":{"type":"int32","optional":false},"payload":5}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":5,"name":"p5"}}
{"schema":{"type":"int32","optional":false},"payload":6}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":6,"name":"p6"}}
{"schema":{"type":"int32","optional":false},"payload":7}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":7,"name":"p7"}}
{"schema":{"type":"int32","optional":false},"payload":8}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":8,"name":"p8"}}
{"schema":{"type":"int32","optional":false},"payload":9}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}]},"payload":{"cityId":9,"name":"p9"}}


----------==----------
IgniteSourceConnectorService RUN 2

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/gg-connect-standalone.properties
bootstrap.servers=localhost:7092

key.converter=org.apache.kafka.connect.json.JsonConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
key.converter.schemas.enable=true
value.converter.schemas.enable=true
offset.storage.file.filename=/tmp/connect.offsets
offset.flush.interval.ms=10000
plugin.path=/opt/ngs/ashishb/packages/kafka_2.12-2.3.0/plugins/gridgain-kafka-connect
rest.port=8083

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/connect-gg-sink.properties
name=gridgain-quickstart2
topics=kci2
tasks.max=1
connector.class=org.gridgain.kafka.sink.IgniteSinkConnector
igniteCfg=/opt/ngs/ashishb/packages/gridgain-enterprise-8.7.6/config/ignite-server-sink.xml

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$



[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ $KAFKA_HOME/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list  localhost:7092  --topic kci2  --time -1 --offsets 1 | awk -F ":" '{sum += $3} END {print sum'}
10
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --property print.key=true --from-beginning --topic kci2
{"schema":{"type":"int32","optional":false},"payload":0}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":0,"name":"p0"}}
{"schema":{"type":"int32","optional":false},"payload":1}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":1,"name":"p1"}}
{"schema":{"type":"int32","optional":false},"payload":2}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":2,"name":"p2"}}
{"schema":{"type":"int32","optional":false},"payload":3}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":3,"name":"p3"}}
{"schema":{"type":"int32","optional":false},"payload":4}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":4,"name":"p4"}}
{"schema":{"type":"int32","optional":false},"payload":5}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":5,"name":"p5"}}
{"schema":{"type":"int32","optional":false},"payload":6}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":6,"name":"p6"}}
{"schema":{"type":"int32","optional":false},"payload":7}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":7,"name":"p7"}}
{"schema":{"type":"int32","optional":false},"payload":8}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":8,"name":"p8"}}
{"schema":{"type":"int32","optional":false},"payload":9}        {"schema":{"type":"struct","optional":false,"fields":[{"type":"int32","optional":false,"field":"cityId"},{"type":"string","optional":false,"field":"name"}],"name":"Person"},"payload":{"cityId":9,"name":"p9"}}


[hdpusr@hdpdev6 gridgain-enterprise-8.7.6]$ cat config/ignite-server-sink.xml
<?xml version="1.0" encoding="UTF-8"?>


<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="grid.cfg" class="org.apache.ignite.configuration.IgniteConfiguration">

         <property name="clientConnectorConfiguration">
            <bean class="org.apache.ignite.configuration.ClientConnectorConfiguration">
                <property name="port" value="10900"/>
            </bean>
        </property>

        <property name="peerClassLoadingEnabled" value="true"/>

	    <property name="communicationSpi">
	        <bean class="org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi">
	            <property name="localPort" value="42100"/>
	        </bean>
	    </property>

        <property name="discoverySpi">
            <bean class="org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi">
            <property name="localPort" value="42500"/>
            <property name="localPortRange" value="20"/>

                <property name="ipFinder">
                    <bean class="org.apache.ignite.spi.discovery.tcp.ipfinder.vm.TcpDiscoveryVmIpFinder">
                        <property name="addresses">
                            <list>
                                <value>localhost:42500..42520</value>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>

    </bean>
</beans>

[hdpusr@hdpdev6 gridgain-enterprise-8.7.6]$ ./bin/ignite.sh config/ignite-server-sink.xml

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/connect-standalone.sh config/gg-connect-standalone.properties config/connect-gg-sink.properties

[hdpusr@hdpdev6 gridgain-enterprise-8.7.6]$ ./bin/ignitevisorcmd.sh

visor> cache
Time of the snapshot: 2019-12-13 15:14:07
+=======================================================================================================================================================+
|  Name(@)  |    Mode     | Nodes | Total entries (Heap / Off-heap) | Primary entries (Heap / Off-heap) |   Hits    |  Misses   |   Reads   |  Writes   |
+=======================================================================================================================================================+
| kci2(@c0) | PARTITIONED | 1     | 10 (0 / 10)                     | min: 10 (0 / 10)                  | min: 0    | min: 0    | min: 0    | min: 0    |
|           |             |       |                                 | avg: 10.00 (0.00 / 10.00)         | avg: 0.00 | avg: 0.00 | avg: 0.00 | avg: 0.00 |
|           |             |       |                                 | max: 10 (0 / 10)                  | max: 0    | max: 0    | max: 0    | max: 0    |
+-------------------------------------------------------------------------------------------------------------------------------------------------------+

Use "-a" flag to see detailed statistics.
visor>

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ $IGNITE_HOME/bin/sqlline.sh --verbose=true -u jdbc:ignite:thin://hdpdev6:10900
issuing: !connect jdbc:ignite:thin://hdpdev6:10900 '' '' org.apache.ignite.IgniteJdbcThinDriver
Connecting to jdbc:ignite:thin://hdpdev6:10900
Connected to: Apache Ignite (version 8.7.6#20190704-sha1:6449a674)
Driver: Apache Ignite Thin JDBC Driver (version 8.7.6#20190704-sha1:6449a674)
Autocommit status: true
Transaction isolation: TRANSACTION_REPEATABLE_READ
sqlline version 1.3.0
0: jdbc:ignite:thin://hdpdev6:10900> !tables
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
|           TABLE_CAT            |          TABLE_SCHEM           |           TABLE_NAME           |           TABLE_TYPE           |            REMARKS             |            TYPE_CAT          |
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
0: jdbc:ignite:thin://hdpdev6:10900> Closing: org.apache.ignite.internal.jdbc.thin.JdbcThinConnection


[hdpusr@hdpdev6 gridgain-web-console-direct-install-8.7.6-linux]$ nohup ./gridgain-web-console-linux --server:port 3000 > /dev/null 2>&1 &
[hdpusr@hdpdev6 ~]$ cd /opt/ngs/ashishb/packages/gridgain-web-console-direct-install-8.7.6-linux/web-agent/

----------==----------
IgniteSourceConnectorService RUN 3

2019-12-16 12:38:05.170  INFO 9716 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 2.3.0
2019-12-16 12:38:05.171  INFO 9716 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: fc1aaa116b661c8a
2019-12-16 12:38:05.171  INFO 9716 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1576480085169
2019-12-16 12:38:05.269  INFO 9716 --- [work-thread | 8] org.apache.kafka.clients.Metadata        : [Producer clientId=8] Cluster ID: cMdW_kXwRq6Mxrigqjo55g
2019-12-16 12:38:05.391  INFO 9716 --- [           main] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=8] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.
2019-12-16 12:38:15.050 DEBUG 9716 --- [pool-1-thread-1] p.k.s.IgniteSourceConnectorService       : count: 10

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ $KAFKA_HOME/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list  localhost:7092  --topic kcisl1  --time -1 --offsets 1 | awk -F ":" '{sum += $3} END {print sum'}
10
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --from-beginning --topic kcisl1
{"payload":{"cityId":0,"name":"p0"}}
{"payload":{"cityId":1,"name":"p1"}}
{"payload":{"cityId":2,"name":"p2"}}
{"payload":{"cityId":3,"name":"p3"}}
{"payload":{"cityId":4,"name":"p4"}}
{"payload":{"cityId":5,"name":"p5"}}
{"payload":{"cityId":6,"name":"p6"}}
{"payload":{"cityId":7,"name":"p7"}}
{"payload":{"cityId":8,"name":"p8"}}
{"payload":{"cityId":9,"name":"p9"}}
^CProcessed a total of 10 messages
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --property print.key=true --from-beginning --topic kcisl1
{"payload":0}   {"payload":{"cityId":0,"name":"p0"}}
{"payload":1}   {"payload":{"cityId":1,"name":"p1"}}
{"payload":2}   {"payload":{"cityId":2,"name":"p2"}}
{"payload":3}   {"payload":{"cityId":3,"name":"p3"}}
{"payload":4}   {"payload":{"cityId":4,"name":"p4"}}
{"payload":5}   {"payload":{"cityId":5,"name":"p5"}}
{"payload":6}   {"payload":{"cityId":6,"name":"p6"}}
{"payload":7}   {"payload":{"cityId":7,"name":"p7"}}
{"payload":8}   {"payload":{"cityId":8,"name":"p8"}}
{"payload":9}   {"payload":{"cityId":9,"name":"p9"}}
^CProcessed a total of 10 messages
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/gg-connect-standalone.properties
bootstrap.servers=localhost:7092

key.converter=org.apache.kafka.connect.json.JsonConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
key.converter.schemas.enable=false
value.converter.schemas.enable=false
#key.converter=org.apache.kafka.connect.converters.ByteArrayConverter
#key.converter=org.apache.kafka.connect.storage.StringConverter
#value.converter=org.apache.kafka.connect.converters.StringConverter
#value.converter=org.apache.kafka.connect.converters.ByteArrayConverter
offset.storage.file.filename=/tmp/connect.offsets
offset.flush.interval.ms=10000
plugin.path=/opt/ngs/ashishb/packages/kafka_2.12-2.3.0/plugins/gridgain-kafka-connect
rest.port=8083

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/connect-gg-sink.properties
name=gridgain-quickstart2
topics=kcisl1
tasks.max=1
connector.class=org.gridgain.kafka.sink.IgniteSinkConnector
igniteCfg=/opt/ngs/ashishb/packages/gridgain-enterprise-8.7.6/config/ignite-server-sink.xml


[hdpusr@hdpdev6 gridgain-enterprise-8.7.6]$ ./bin/ignitevisorcmd.sh

visor> cache
Time of the snapshot: 2019-12-16 12:47:44
+=========================================================================================================================================================+
|   Name(@)   |    Mode     | Nodes | Total entries (Heap / Off-heap) | Primary entries (Heap / Off-heap) |   Hits    |  Misses   |   Reads   |  Writes   |
+=========================================================================================================================================================+
| kcisl1(@c0) | PARTITIONED | 1     | 10 (0 / 10)                     | min: 10 (0 / 10)                  | min: 0    | min: 0    | min: 0    | min: 0    |
|             |             |       |                                 | avg: 10.00 (0.00 / 10.00)         | avg: 0.00 | avg: 0.00 | avg: 0.00 | avg: 0.00 |
|             |             |       |                                 | max: 10 (0 / 10)                  | max: 0    | max: 0    | max: 0    | max: 0    |
+---------------------------------------------------------------------------------------------------------------------------------------------------------+

Use "-a" flag to see detailed statistics.
visor>


----------==----------
IgniteSourceConnectorService RUN 4

2019-12-16 15:17:20.172  INFO 6300 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 2.3.0
2019-12-16 15:17:20.172  INFO 6300 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: fc1aaa116b661c8a
2019-12-16 15:17:20.172  INFO 6300 --- [           main] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1576489640172
2019-12-16 15:17:20.275  INFO 6300 --- [work-thread | 8] org.apache.kafka.clients.Metadata        : [Producer clientId=8] Cluster ID: cMdW_kXwRq6Mxrigqjo55g
2019-12-16 15:17:20.410  INFO 6300 --- [           main] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=8] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.
2019-12-16 15:17:30.072 DEBUG 6300 --- [pool-1-thread-1] p.k.s.IgniteSourceConnectorService       : count: 10


[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/gg-connect-standalone.properties
bootstrap.servers=localhost:7092

key.converter=org.apache.kafka.connect.converters.ByteArrayConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
key.converter.schemas.enable=false
value.converter.schemas.enable=false
#key.converter=org.apache.kafka.connect.converters.ByteArrayConverter
#key.converter=org.apache.kafka.connect.storage.StringConverter
#value.converter=org.apache.kafka.connect.converters.StringConverter
#value.converter=org.apache.kafka.connect.converters.ByteArrayConverter
offset.storage.file.filename=/tmp/connect.offsets
offset.flush.interval.ms=10000
plugin.path=/opt/ngs/ashishb/packages/kafka_2.12-2.3.0/plugins/gridgain-kafka-connect
rest.port=8083

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat config/connect-gg-sink.properties
name=gridgain-quickstart2
topics=kcisl2
tasks.max=1
connector.class=org.gridgain.kafka.sink.IgniteSinkConnector
igniteCfg=/opt/ngs/ashishb/packages/gridgain-enterprise-8.7.6/config/ignite-server-sink.xml

[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ cat /opt/ngs/ashishb/packages/gridgain-enterprise-8.7.6/config/ignite-server-sink.xml
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="grid.cfg" class="org.apache.ignite.configuration.IgniteConfiguration">

         <property name="clientConnectorConfiguration">
            <bean class="org.apache.ignite.configuration.ClientConnectorConfiguration">
                <property name="port" value="10900"/>
            </bean>
        </property>

        <property name="peerClassLoadingEnabled" value="true"/>
	
	    <property name="communicationSpi">
	        <bean class="org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi">
	            <property name="localPort" value="42100"/>
	        </bean>
	    </property>

        <property name="discoverySpi">
            <bean class="org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi">
            <property name="localPort" value="42500"/>
            <property name="localPortRange" value="20"/>

                <property name="ipFinder">
                    <bean class="org.apache.ignite.spi.discovery.tcp.ipfinder.vm.TcpDiscoveryVmIpFinder">
                        <property name="addresses">
                            <list>
                                <value>localhost:42500..42520</value>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>

    </bean>
</beans>



[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ $KAFKA_HOME/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list  localhost:7092  --topic kcisl2  --time -1 --offsets 1 | awk -F ":" '{sum += $3} END {print sum'}
10
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092 --property print.key=true --from-beginning --topic kcisl2
        {"cityId":0,"name":"p0"}
        {"cityId":1,"name":"p1"}
        {"cityId":2,"name":"p2"}
        {"cityId":3,"name":"p3"}
        {"cityId":4,"name":"p4"}
        {"cityId":5,"name":"p5"}
        {"cityId":6,"name":"p6"}
        {"cityId":7,"name":"p7"}                                                                                                                                                                    {"cityId":8,"name":"p8"}
                {"cityId":9,"name":"p9"}
PuTTY

^CProcessed a total of 10 messages
[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:7092  --from-beginning --topic kcisl2
{"cityId":0,"name":"p0"}
{"cityId":1,"name":"p1"}
{"cityId":2,"name":"p2"}
{"cityId":3,"name":"p3"}
{"cityId":4,"name":"p4"}
{"cityId":5,"name":"p5"}
{"cityId":6,"name":"p6"}
{"cityId":7,"name":"p7"}
{"cityId":8,"name":"p8"}
{"cityId":9,"name":"p9"}


[hdpusr@hdpdev6 kafka_2.12-2.3.0]$ $IGNITE_HOME/bin/sqlline.sh --verbose=true -u jdbc:ignite:thin://hdpdev6:10900
issuing: !connect jdbc:ignite:thin://hdpdev6:10900 '' '' org.apache.ignite.IgniteJdbcThinDriver
Connecting to jdbc:ignite:thin://hdpdev6:10900
Connected to: Apache Ignite (version 8.7.6#20190704-sha1:6449a674)
Driver: Apache Ignite Thin JDBC Driver (version 8.7.6#20190704-sha1:6449a674)
Autocommit status: true
Transaction isolation: TRANSACTION_REPEATABLE_READ
sqlline version 1.3.0
0: jdbc:ignite:thin://hdpdev6:10900> !tables
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
|           TABLE_CAT            |          TABLE_SCHEM           |           TABLE_NAME           |           TABLE_TYPE           |            REMARKS             |            TYPE_CAT          |
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
0: jdbc:ignite:thin://hdpdev6:10900>

[hdpusr@hdpdev6 gridgain-enterprise-8.7.6]$ ./bin/ignitevisorcmd.sh

visor> cache
Time of the snapshot: 2019-12-16 15:21:11
+=========================================================================================================================================================+
|   Name(@)   |    Mode     | Nodes | Total entries (Heap / Off-heap) | Primary entries (Heap / Off-heap) |   Hits    |  Misses   |   Reads   |  Writes   |
+=========================================================================================================================================================+
| kcisl2(@c0) | PARTITIONED | 1     | 10 (0 / 10)                     | min: 10 (0 / 10)                  | min: 0    | min: 0    | min: 0    | min: 0    |
|             |             |       |                                 | avg: 10.00 (0.00 / 10.00)         | avg: 0.00 | avg: 0.00 | avg: 0.00 | avg: 0.00 |
|             |             |       |                                 | max: 10 (0 / 10)                  | max: 0    | max: 0    | max: 0    | max: 0    |
+---------------------------------------------------------------------------------------------------------------------------------------------------------+

Use "-a" flag to see detailed statistics.
visor>


[hdpusr@hdpdev6 web-agent]$  ./ignite-web-agent.sh
Web console: http://172.17.5.36:3000/notebook/5def87b3b479b1570c8ae054#paragraph-1

Key Class,Key,Value Class,Value
"byte[]","size=4","java.util.HashMap","{name=p2, cityId=2}"
"byte[]","size=4","java.util.HashMap","{name=p6, cityId=6}"
"byte[]","size=4","java.util.HashMap","{name=p8, cityId=8}"
"byte[]","size=4","java.util.HashMap","{name=p1, cityId=1}"
"byte[]","size=4","java.util.HashMap","{name=p7, cityId=7}"
"byte[]","size=4","java.util.HashMap","{name=p3, cityId=3}"
"byte[]","size=4","java.util.HashMap","{name=p5, cityId=5}"
"byte[]","size=4","java.util.HashMap","{name=p9, cityId=9}"
"byte[]","size=4","java.util.HashMap","{name=p4, cityId=4}"
"byte[]","size=4","java.util.HashMap","{name=p0, cityId=0}"
